<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>兼容性较好的jQuery抽奖大转盘特效代码 - JS代码网</title>
	<meta name="viewport" content="width=320, maximum-scale=1, user-scalable=no">
	<meta content="telephone=no" name="format-detection">
	<meta content="email=no" name="format-detection">
	<meta name="apple-touch-fullscreen" content="NO">
	<link href="${base}/html/plugins/dazhuanpan/css/wap_Lottery.css" rel="stylesheet" type="text/css">

	<link rel="stylesheet" href="${base}/html/plugins/dazhuanpan/css/demo.css" type="text/css" />
<script type="text/javascript" src="${base}/html/plugins/dazhuanpan/js/jquery.min.js"></script>
<script type="text/javascript" src="${base}/html/plugins/dazhuanpan/js/awardRotate.js"></script>
<script type="text/javascript">
	$(window).resize(function(e) {
		initialise();
	});
	function initialise(){
		var windowwidth=$(window).width();
		if(windowwidth>640){windowwidth=640;}
		var scale=windowwidth/320;
		$("#main").css("padding-top",scale*40);
		$(".lotterynum").css({"margin-left":scale*30,"margin-right":scale*30});
	}
$(function (){
	initialise();
	var rotateTimeOut = function (){
		$('#rotate').rotate({
			angle:0,
			animateTo:2160,
			duration:8000,
			callback:function (){
				alert('网络超时，请检查您的网络设置！');
			}
		});
	};
	var bRotate = false;

	var rotateFn = function (awards, angles, txt){
		bRotate = !bRotate;
		$('#rotate').stopRotate();
		$('#rotate').rotate({
			angle:0,
			animateTo:angles+1800,
			duration:8000,
			callback:function (){
				alert(txt);
				bRotate = !bRotate;
			}
		})
	};

	$('.pointer').click(function (){

		if(bRotate)return;
		var item = rnd(0,7);

		switch (item) {
			case 0:
				//var angle = [26, 88, 137, 185, 235, 287, 337];
				rotateFn(0, 337, '未中奖');
				break;
			case 1:
				//var angle = [88, 137, 185, 235, 287];
				rotateFn(1, 26, '免单4999元');
				break;
			case 2:
				//var angle = [137, 185, 235, 287];
				rotateFn(2, 88, '免单50元');
				break;
			case 3:
				//var angle = [137, 185, 235, 287];
				rotateFn(3, 137, '免单10元');
				break;
			case 4:
				//var angle = [185, 235, 287];
				rotateFn(4, 185, '免单5元');
				break;
			case 5:
				//var angle = [185, 235, 287];
				rotateFn(5, 185, '免单5元');
				break;
			case 6:
				//var angle = [235, 287];
				rotateFn(6, 235, '免分期服务费');
				break;
			case 7:
				//var angle = [287];
				rotateFn(7, 287, '提高白条额度');
				break;
		}

		console.log(item);
	});
});
function rnd(n, m){
	return Math.floor(Math.random()*(m-n+1)+n)
}
</script>
</head>
<body>
<div id="wrapper">
	<div id="container">
		<div id="main" style="padding-top: 80px;">
			<div class="lotteryTitle">幸福大转盘</div>
			<div id="lottery">
				<div class="lotBg" style="background-image: url('${base}/html/plugins/dazhuanpan/img/turntable.png')">
				<div class="turntable-bg">
				<div class="pointer"><img src="${base}/html/plugins/dazhuanpan/img/pointer.png" alt="pointer"/></div>
			</div>
			</div>
				</div>
		</div>
	</div>
</div>

</body>
</html>
